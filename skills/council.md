# Multi-LLM Council Skill v3.0

다중 LLM CLI 도구를 활용한 집단 지성 시스템. **단일 명령어로 최대 출력.**

## 개요

Claude Code가 의장으로서 Gemini CLI, Codex CLI를 조율하여 **통합 3단계 협의 프로세스**를 진행합니다. 추가 API 비용 없이 기존 CLI 구독만으로 운영됩니다.

## 사용법

```
/council <질문>
```

**단 하나의 명령어로 모든 기능을 최대 출력 모드로 실행합니다.**

## 위원 구성

| 위원 | CLI | 모델 | 역할 |
|------|-----|------|------|
| Gemini | `gemini --yolo` | gemini-3-pro-preview | 보안/성능 전문가 |
| Codex | `codex exec` | gpt-5.2-codex | 구현/실용성 전문가 |
| Claude | (의장) | claude-opus-4.5 | UX/아키텍처 전문가 |

## 통합 3단계 프로세스

```
┌─────────────────────────────────────────────┐
│         Multi-LLM Council v3.0               │
│           최대 출력 통합 모드                  │
├─────────────────────────────────────────────┤
│                                             │
│  Stage 1: 역할 기반 병렬 의견 수집             │
│  ├── Gemini (보안/성능) ─┐                   │
│  ├── Codex (구현/실용)  ─┼─ 동시 실행         │
│  └── Claude (UX/아키텍처)─┘                  │
│                                             │
│  Stage 2: 익명 교차 평가                      │
│  ├── 응답 익명화 (A, B, C)                   │
│  ├── 100점 척도 평가                         │
│  └── 순위 집계                               │
│                                             │
│  Stage 3: 최종 종합                          │
│  ├── 역할별 분석 통합                         │
│  ├── 우선순위별 권장사항                      │
│  ├── 신뢰도 계산                             │
│  └── 종합 결론                               │
│                                             │
└─────────────────────────────────────────────┘
```

## 핵심 원칙

1. **독립성**: 각 위원은 독립적으로 역할 기반 분석
2. **익명성**: 평가 시 응답자 신원 비공개
3. **투명성**: 모든 과정과 근거 공개
4. **합의 지향**: 다수결보다 논거의 질 중시
5. **구조화**: JSON 형식으로 파싱 안정성 확보

## 구조화된 출력 형식

모든 위원은 역할 기반 JSON으로 응답:

```json
{
  "role": "전문가 역할",
  "summary": "핵심 요약",
  "analysis": {
    "전문_분야": { ... }
  },
  "evidence": ["근거1", "근거2"],
  "recommendations": ["권장사항1", "권장사항2"],
  "confidence": 0.85,
  "caveats": ["주의사항"]
}
```

## 평가 기준 (100점 만점)

| 항목 | 비중 | 설명 |
|------|------|------|
| 정확성 | 30% | 사실 정확성, 검증 가능성 |
| 깊이 | 25% | 근본 원인 분석, 다각적 관점 |
| 실용성 | 25% | 적용 가능성, 구체적 예시 |
| 명료성 | 20% | 논리 구조, 간결함 |

## 신뢰도 계산

```
신뢰도 = (합의율 × 0.4) + (평균점수/100 × 0.3) + (근거품질 × 0.3)

합의율:
- 높음 (0.9): 3명 모두 동일 결론
- 중간 (0.6): 2명 동의
- 낮음 (0.3): 모두 다른 의견

등급:
- 0.8+: 높음
- 0.5-0.8: 중간
- 0.5 미만: 낮음 (추가 검토 권장)
```

## 에러 처리

### 재시도 로직 (Exponential Backoff)

```
max_retries: 2
initial_delay: 2초
backoff_multiplier: 2
```

### 실패 처리

| 상황 | 처리 |
|------|------|
| CLI 실패 | Exponential Backoff 2회 재시도 |
| 위원 1명 실패 | 2인 위원회로 진행 |
| 2명 미만 응답 | 세션 중단 |
| JSON 파싱 실패 | 자유 형식 폴백 |
| 타임아웃 | 120초/위원 |

## 요구사항

- Gemini CLI (`gemini`) 설치 및 인증
- Codex CLI (`codex`) 설치 및 인증
- Claude Code 환경

## 버전 정보

### v3.0 (2025-01-11)
- **단일 명령어 통합**: `/council` 하나로 모든 기능
- 역할 기반 전문가 분석 기본 포함
- 완전한 3단계 프로세스 (교차 평가 포함)
- 최대 병렬 실행
- 우선순위별 권장사항 출력

### v2.0
- 병렬 실행 도입
- 구조화된 JSON 출력
- 평가 기준 명확화 (100점 척도)
- 신뢰도 계산 공식 추가

### v1.0
- 초기 버전
- 3개 분리 명령어 (council, council-quick, council-expert)
